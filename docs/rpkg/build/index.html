<!DOCTYPE html>
<html lang="en" class="govuk-template "><head>
  <meta charset="utf-8">
  
  
  <title>govuk-hugo Demonstration | Build tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0c0c">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  

  

  
  <link href="https://co-analysis.github.io/govuk-hugo-demo/css/govuk-frontend-4.0.0.min.css" rel="stylesheet">
  

  

  <link href="https://co-analysis.github.io/govuk-hugo-demo/css/dashboard-layout.css" rel="stylesheet">

  
  <link href="https://co-analysis.github.io/govuk-hugo-demo/css/font-override.css" rel="stylesheet">
  

  
  <link href="https://co-analysis.github.io/govuk-hugo-demo/css/syntax.css" rel="stylesheet">

  

  

</head><body class="govuk-template__body js-enabled"><script>
    document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');

</script>

<a href="#main-content" class="govuk-skip-link">Skip to main content</a>

<header class="govuk-header " role="banner" data-module="govuk-header">
    <div class="govuk-header__container govuk-width-container">

        <div class="govuk-header__logo">
            <a href="https://co-analysis.github.io/govuk-hugo-demo/" class="govuk-header__link govuk-header__link--homepage">

                

                
                <span class="govuk-header__product-name">Demonstration and Documentation of govuk-hugo</span>
                

            </a>
            <button class="mobile-nav-button govuk-button" id="mobile-nav-control">Menu ▼</button>
        </div>

    </div>
</header>

<div class="govuk-width-container">
    
<nav class="mobile-nav" id="mobile-nav">

        
        

        

        <ul class="govuk-list">

                

                

                

                
                <li class="nav-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/docs/">Documentation</a>
                </li>
                
                

                
                

                

                

                

                

                

                
                
                

                

                
                
                

                

                
                
                

                

                
                

                

                

                

                
                <li class="nav-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/tests/">Examples</a>
                </li>
                
                

                
                

                

                
                
                

                

                
                
                

                

                
                
                

                

                
                

                

                

                

                
                <li class="nav-section nav-active-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/">R package documentation</a>
                </li>
                
                

                
                

                

                
                <li class="nav-item nav-active-item"><a
                                class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state "
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/build/">Build tools</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/filters/">Crosstalk filters</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/render_svg/">Image tools</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/govuk_datatable/">Interactive tables</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/colours/">Use GOV.UK colours</a></li>
                

                

                
                

                

        </ul>

        

        <ul class="govuk-list nav-extra">

                
                <li class="nav-item nav-about"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/about/">About page</a></li>
                

                </a>

        </ul>
        

</nav>
</div>


<div class="govuk-width-container">
    <div class="govuk-phase-banner">
        <p class="govuk-phase-banner__content">
            <strong class="govuk-tag govuk-phase-banner__content__tag">
                alpha
            </strong>
            <span class="govuk-phase-banner__text">
                This is a new service – your <a class="govuk-link" href="https://github.com/co-analysis/govuk-hugo-demo/issues/">feedback</a>
                will
                help us to improve it.
            </span>
        </p>
    </div>
</div>
<div class="govuk-width-container ">
        <main class="govuk-main-wrapper " id="main-content" role="main">
            <div class="dashboard-container" id="top">

                <div class="dashboard-nav">
<nav class="sidebar-nav">

        
        

        

        <ul class="govuk-list">

                

                

                

                
                <li class="nav-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/docs/">Documentation</a>
                </li>
                
                

                
                

                

                

                

                

                

                
                
                

                

                
                
                

                

                
                
                

                

                
                

                

                

                

                
                <li class="nav-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/tests/">Examples</a>
                </li>
                
                

                
                

                

                
                
                

                

                
                
                

                

                
                
                

                

                
                

                

                

                

                
                <li class="nav-section nav-active-section"><a class="govuk-!-font-size-16" href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/">R package documentation</a>
                </li>
                
                

                
                

                

                
                <li class="nav-item nav-active-item"><a
                                class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state "
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/build/">Build tools</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/filters/">Crosstalk filters</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/render_svg/">Image tools</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/govuk_datatable/">Interactive tables</a></li>
                

                

                

                

                
                <li class="nav-item"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/rpkg/colours/">Use GOV.UK colours</a></li>
                

                

                
                

                

        </ul>

        

        <ul class="govuk-list nav-extra">

                
                <li class="nav-item nav-about"><a class="govuk-!-font-size-14 govuk-link govuk-link--no-visited-state"
                                href="https://co-analysis.github.io/govuk-hugo-demo/about/">About page</a></li>
                

                </a>

        </ul>
        

</nav></div>
                <div class="dashboard-content">


<h1 class="govuk-heading-xl">Build tools</h1>


<div class="govuk-body">

    <p>The <code>{govukhugo}</code> R package includes two functions for building the Hugo. Use <code>build_hugo()</code> to convert Rmarkdown files and the Hugo site, use <code>build_hugo_rmd()</code> if you only want to convert Rmarkdown files. The custom rendering function <code>render_rmd()</code> is exported to the user, but is not intended for general use. A fuller description of the process is provided in the <a href="https://co-analysis.github.io/govuk-hugo-demo/docs/rmarkdown/" class="govuk-link" >main documentation</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">build_hugo</span><span class="p">(</span>
  <span class="n">with_rmd</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
  <span class="n">rmd_folder</span> <span class="o">=</span> <span class="s">&#34;R/Rmd&#34;</span><span class="p">,</span> 
  <span class="n">rebuild</span> <span class="o">=</span> <span class="kc">FALSE</span>
<span class="p">)</span>

<span class="nf">build_hugo_rmd</span><span class="p">(</span>
  <span class="n">rmd_folder</span> <span class="o">=</span> <span class="s">&#34;R/Rmd&#34;</span><span class="p">,</span>
  <span class="n">rebuild</span> <span class="o">=</span> <span class="kc">FALSE</span>
<span class="p">)</span>

<span class="nf">render_rmd</span><span class="p">(</span>
  <span class="n">rmd_file</span><span class="p">,</span> 
  <span class="n">tmp_dir</span> <span class="o">=</span> <span class="nf">tempdir</span><span class="p">(),</span> 
  <span class="n">out_dir</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span>
  <span class="n">quiet</span> <span class="o">=</span> <span class="kc">TRUE</span>
<span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<h2 id="arguments" class="govuk-heading-l">Arguments</h2>

<dl class="govuk-summary-list govuk-summary-list--no-border">
  
<div class="govuk-summary-list__row">
  <dt class="govuk-summary-list__key">
    with_rmd
  </dt>
  <dd class="govuk-summary-list__value">
    Whether to build Rmarkdown files, default is <code>TRUE</code>
  </dd>
</div>
<div class="govuk-summary-list__row">
  <dt class="govuk-summary-list__key">
    rmd_folder
  </dt>
  <dd class="govuk-summary-list__value">
    The location of the Rmarkdown files, default is <code>R/Rmd</code>
  </dd>
</div>
<div class="govuk-summary-list__row">
  <dt class="govuk-summary-list__key">
    rebuild
  </dt>
  <dd class="govuk-summary-list__value">
    Whether to rebuild all the Rmarkdown files, default is <code>FALSE</code>
  </dd>
</div>

</dl>


<h2 id="build_hugo" class="govuk-heading-l">build_hugo()</h2>
<p><code>build_hugo()</code> is a wrapper around <code>build_hugo_rmd()</code> that calls the Hugo site builder after the Rmarkdown files have been converted to the format the govukhugo theme expects, this removes the need to call <code>build_hugo_rmd()</code> and then switch to a shell terminal to call Hugo directly. The arguments <code>rmd_folder</code> and <code>rebuild</code> are passed directly to <code>build_hugo_rmd()</code>. Calling <code>build_hugo(with_rmd = FALSE)</code> is equivalent to calling Hugo from the terminal.</p>

<h2 id="build_hugo_rmd" class="govuk-heading-l">build_hugo_rmd()</h2>
<p><code>build_hugo_rmd()</code> controls the process of building Rmarkdown files into HTML files that can be processed by Hugo.</p>
<p>It is assumed that the Rmarkdown files are stored in an <code>R/Rmd</code> folder under the main site directory, however this can be changed via the argument <code>rmd_folder</code>. Any data used by the Rmarkdown files is assumed to be in an <code>R/data</code> folder under the main site directory, this cannot be changed programmatically at this stage.</p>
<p>The default behaviour of <code>build_hugo_rmd()</code> is to only process files that have been changed. This is done by checking the file <code>rmd.log</code> in the Rmarkdown folder, which logs ths md5 checksums of the Rmarkdown files. If the log is not available or the setting <code>rebuild = TRUE</code> is supplied then all Rmarkdown files will be reprocessed.</p>

<h2 id="render_rmd" class="govuk-heading-l">render_rmd()</h2>
<p>The process of converting an Rmarkdown file to govukhugo format is controlled by <code>render_rmd()</code>, it is called by <code>build_hugo_rmd()</code> to convert each Rmarkdown file. While exposed to end users it is not intended for general purpose usage as it implicitly relies on assumptions put in place by <code>build_hugo_rmd()</code>.</p>
<p>The main purpose of <code>render_rmd()</code> is to post-process a knitted Rmarkdown document. The function knits a file to HTML using <code>rmarkdown::html_document()</code> but then strips out header information, reverts the conversion of some punctuation and applies Hugo shortcodes to code blocks. It will then append the Rmarkdown YAML front matter to the HTML and adds a <code>rmarkdown: true</code> parameter that ensures the relevant javascript and CSS plugins are added for supported HTML widgets.</p>


</div>



                </div>
            </div>
            <div id="scroll-back">
                <a class="govuk-link govuk-link--no-visited-state app-back-to-top__link" href="#top">
                    <svg role="presentation" focusable="false" class="app-back-to-top__icon" xmlns="http://www.w3.org/2000/svg"
                        width="13" height="17" viewBox="0 0 13 17">
                        <path fill="currentColor" d="M6.5 0L0 6.5 1.4 8l4-4v12.7h2V4l4.3 4L13 6.4z"></path>
                    </svg>Back to top
                </a>
            </div>
        </main>
    </div><footer class="govuk-footer " role="contentinfo">
    <div class="govuk-width-container ">
        <div class="govuk-footer__meta">
            <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">

                <h2 class="govuk-visually-hidden">Support links</h2>
                <ul class="govuk-footer__inline-list">

                    

                    
                    
                    <li class="govuk-footer__inline-list-item">
                        <a class="govuk-footer__link" href="https://co-analysis.github.io/govuk-hugo-demo/accessibility/">
                            Accessibility
                        </a>
                    </li>
                    
                    
                    
                    <li class="govuk-footer__inline-list-item">
                        <a class="govuk-footer__link" href="https://co-analysis.github.io/govuk-hugo-demo/cookies/">
                            Cookies
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="govuk-footer__inline-list-item">
                        Built by <a class="govuk-footer__link" href="https://www.github.com/co-analysis">
                            Cabinet Office Analysis &amp; Insight
                        </a>
                    </li>
                    

                </ul>

                <svg aria-hidden="true" focusable="false" class="govuk-footer__licence-logo"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 483.2 195.7" height="17" width="41">
                    <path fill="currentColor"
                        d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145" />
                </svg>
                <span class="govuk-footer__licence-description">
                    All content is available under the
                    <a class="govuk-footer__link"
                        href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
                        rel="license">Open Government Licence v3.0</a>, except where otherwise stated
                </span>
            </div>
            <div class="govuk-footer__meta-item">
                <a style="background-image:url(https://co-analysis.github.io/govuk-hugo-demo/assets/images/govuk-crest.png);"
                    class="govuk-footer__link govuk-footer__copyright-logo"
                    href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/">©
                    Crown copyright </a>
            </div>
        </div>
    </div>
</footer>


<script type="text/javascript">

    function applyGOVUK(tag, govuk_class) {
        var elements = document.querySelector("div.dashboard-content").getElementsByTagName(tag)

        var i;
        for (i = 0; i < elements.length; i++) {
            if (elements[i].classList.contains("lntable") || elements[i].classList.contains("lntd")) {
                null;
            } else if (tag == "P" && (elements[i].classList.contains("govuk-body-l") || elements[i].classList.contains("govuk-body-s"))) {
                null;
            } else if (tag == "HR" && (elements[i].classList.contains("govuk-section-break"))) {
                null;
            } else {
                elements[i].classList.add(govuk_class);
            }

        };

    };

     
    applyGOVUK("P", "govuk-body");

     
    applyGOVUK("TABLE", "govuk-table");
    applyGOVUK("CAPTION", "govuk-table__caption");
    applyGOVUK("CAPTION", "govuk-table__caption--m");
    applyGOVUK("TR", "govuk-table__row");
    applyGOVUK("TD", "govuk-table__cell");
    applyGOVUK("THEAD", "govuk-table__head");
    applyGOVUK("TH", "govuk-table__header");

     
    applyGOVUK("BLOCKQUOTE", "govuk-inset-text");
    applyGOVUK("STRONG", "govuk-!-font-weight-bold");
    applyGOVUK("B", "govuk-!-font-weight-bold");

     
    applyGOVUK("UL", "govuk-list");
    applyGOVUK("UL", "govuk-list--bullet");
    applyGOVUK("OL", "govuk-list");
    applyGOVUK("OL", "govuk-list--number");

     
    applyGOVUK("HR", "govuk-section-break--l");
    applyGOVUK("HR", "govuk-section-break");

     
    function styleCodeBlocks() {
        var code_elements = document.querySelectorAll("div.highlight")
        var i;

        for (i = 0; i < code_elements.length; i++) {
            code_elements[i].classList.add("govuk-body");
        };
    };
    styleCodeBlocks();

     
    function restyleTOC() {

        var toc_elements = document.querySelectorAll("#page_toc #TableOfContents ul")

        var i;

        for (i = 0; i < toc_elements.length; i++) {
            toc_elements[i].classList.remove("govuk-list");
            toc_elements[i].classList.remove("govuk-list--bullet");
            toc_elements[i].classList.add("toc-list");

        };

        var toc_links = document.querySelectorAll("#page_toc #TableOfContents a")

        for (i = 0; i < toc_links.length; i++) {
            toc_links[i].classList.add("toc-link");
        };

    };
    restyleTOC();

    

    function scrollTop() {
        if (window.innerWidth <= 768) {
            document.getElementById("scroll-back").style.display = "none";
        } else if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            document.getElementById("scroll-back").style.display = "block";
        } else {
            document.getElementById("scroll-back").style.display = "none";
        };
    }

    window.onscroll = function() { scrollTop() };

    function mobileNav() {
        var navState = document.getElementById("mobile-nav").style.display
        if (navState == '' || navState == "none") {
            document.getElementById("mobile-nav").style.display = "block";
        } else {
            document.getElementById("mobile-nav").style.display = "none";
        }
        console.log(navState)
    }

    document.getElementById("mobile-nav-control").onclick = function() { mobileNav() };

</script>


<script src="https://co-analysis.github.io/govuk-hugo-demo/js/govuk-frontend-4.0.0.min.js"></script>
<script>
    window.GOVUKFrontend.initAll()
</script></body>

</html>